# Autogenerated
# Filename: proxy-config-example.yaml

tracing:
  enabled: false
  type: ""
  endpoint: ""
  collector: ""
log:
  level: ""
  pretty: false
  color: false
  file: ""
debug:
  addr: 127.0.0.1:9205
  token: ""
  pprof: false
  zpages: false
http:
  addr: 0.0.0.0:9200
  root: /
  tls_cert: ~/.ocis/proxy/server.crt
  tls_key: ~/.ocis/proxy/server.key
  tls: true
reva:
  address: 127.0.0.1:9142
policies:
- name: ocis
  routes:
  - endpoint: /
    backend: http://localhost:9100
    unprotected: true
  - endpoint: /.well-known/
    backend: http://localhost:9130
    unprotected: true
  - endpoint: /konnect/
    backend: http://localhost:9130
    unprotected: true
  - endpoint: /signin/
    backend: http://localhost:9130
    unprotected: true
  - endpoint: /archiver
    backend: http://localhost:9140
  - type: regex
    endpoint: /ocs/v[12].php/cloud/user/signing-key
    backend: http://localhost:9110
  - type: regex
    endpoint: /ocs/v[12].php/config
    backend: http://localhost:9140
    unprotected: true
  - endpoint: /ocs/
    backend: http://localhost:9140
  - type: query
    endpoint: /remote.php/?preview=1
    backend: http://localhost:9115
  - method: REPORT
    endpoint: /remote.php/dav/
    backend: http://localhost:9115
  - method: REPORT
    endpoint: /remote.php/webdav
    backend: http://localhost:9115
  - type: query
    endpoint: /dav/?preview=1
    backend: http://localhost:9115
  - type: query
    endpoint: /webdav/?preview=1
    backend: http://localhost:9115
  - endpoint: /remote.php/
    service: com.owncloud.web.ocdav
  - endpoint: /dav/
    service: com.owncloud.web.ocdav
  - endpoint: /webdav/
    service: com.owncloud.web.ocdav
  - endpoint: /status
    service: com.owncloud.web.ocdav
    unprotected: true
  - endpoint: /status.php
    service: com.owncloud.web.ocdav
    unprotected: true
  - endpoint: /index.php/
    service: com.owncloud.web.ocdav
  - endpoint: /apps/
    service: com.owncloud.web.ocdav
  - endpoint: /data
    backend: http://localhost:9140
    unprotected: true
  - endpoint: /app/list
    backend: http://localhost:9140
    unprotected: true
  - endpoint: /app/
    backend: http://localhost:9140
  - endpoint: /graph/
    backend: http://localhost:9120
  - endpoint: /graph-explorer
    backend: http://localhost:9135
    unprotected: true
  - endpoint: /api/v0/settings
    backend: http://localhost:9190
  - endpoint: /settings.js
    backend: http://localhost:9190
    unprotected: true
oidc:
  issuer: https://localhost:9200
  insecure: false
  access_token_verify_method: jwt
  user_info_cache:
    size: 1024
    ttl: 10
  jwks:
    refresh_interval: 60
    refresh_timeout: 10
    refresh_limit: 60
    refresh_unknown_kid: true
  rewrite_well_known: false
token_manager:
  jwt_secret: ""
policy_selector:
  static:
    policy: ocis
  claims: null
  regex: null
pre_signed_url:
  allowed_http_methods:
  - GET
  enabled: true
account_backend: cs3
user_oidc_claim: preferred_username
user_cs3_claim: username
machine_auth_api_key: ""
auto_provision_accounts: false
enable_basic_auth: false
insecure_backends: false
auth_middleware:
  credentials_by_user_agent: {}
