<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Storages">

<title>Storages | ownCloud</title>
<link rel="icon" href="/favicon/favicon-32x32.png" type="image/x-icon">

<link rel="stylesheet" href="/main.min.css">

<link rel="stylesheet" href="/custom.css">


<!--
    Made with Geekdoc theme
    https://github.com/xoxys/hugo-geekdoc
-->

</head>

<body>
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="0 0 24 24" id="arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M20.016 11.016v1.969H7.828l5.578 5.625L12 20.016 3.984 12 12 3.984l1.406 1.406-5.578 5.625h12.188z"/></symbol><symbol viewBox="0 0 24 24" id="arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M7.969 11.016v-3L3.985 12l3.984 3.984v-3h12.047v-1.969H7.969z"/></symbol><symbol viewBox="0 0 24 24" id="arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M16.031 11.016v-3L20.015 12l-3.984 3.984v-3H3.984v-1.969h12.047z"/></symbol><symbol viewBox="0 0 24 24" id="bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15 5.016q.797 0 1.406.586t.609 1.383v16.031l-7.031-3-6.984 3V6.985q0-.797.609-1.383t1.406-.586h9.984zM18.984 18V5.016q0-.797-.586-1.406t-1.383-.609H6.984q0-.797.609-1.406T8.999.986h9.984q.797 0 1.406.609t.609 1.406v15.984z"/></symbol><symbol viewBox="0 0 16 28" id="code" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 23a1.5 1.5 0 10-3.001.001A1.5 1.5 0 004.5 23zm0-18a1.5 1.5 0 10-3.001.001A1.5 1.5 0 004.5 5zm10 2a1.5 1.5 0 10-3.001.001A1.5 1.5 0 0014.5 7zM16 7a3.002 3.002 0 01-1.5 2.594c-.047 5.641-4.047 6.891-6.703 7.734C5.313 18.109 4.5 18.484 4.5 20v.406A3 3 0 016 23a3.001 3.001 0 01-6 0c0-1.109.609-2.078 1.5-2.594V7.594A3 3 0 010 5a3.001 3.001 0 016 0 3.002 3.002 0 01-1.5 2.594v7.766c.797-.391 1.641-.656 2.406-.891 2.906-.922 4.562-1.609 4.594-4.875A3 3 0 0110 7a3.001 3.001 0 016 0z"/></symbol><symbol viewBox="0 0 24 24" id="date" xmlns="http://www.w3.org/2000/svg"><path d="M18.984 20.016V9H5.015v11.016h13.969zm0-16.032q.797 0 1.406.609t.609 1.406v14.016q0 .797-.609 1.383t-1.406.586H5.015q-.844 0-1.43-.563t-.586-1.406V5.999q0-.797.586-1.406t1.43-.609h.984V2.015h2.016v1.969h7.969V2.015H18v1.969h.984zm-1.968 7.032v1.969H15v-1.969h2.016zm-4.032 0v1.969h-1.969v-1.969h1.969zm-3.984 0v1.969H6.984v-1.969H9z"/></symbol><symbol viewBox="0 0 24 24" id="download" xmlns="http://www.w3.org/2000/svg"><path d="M5.016 18h13.969v2.016H5.016V18zm13.968-9L12 15.984 5.016 9H9V3h6v6h3.984z"/></symbol><symbol viewBox="0 0 24 24" id="email" xmlns="http://www.w3.org/2000/svg"><path d="M20.016 8.016V6L12 11.016 3.984 6v2.016L12 12.985zm0-4.032q.797 0 1.383.609t.586 1.406v12q0 .797-.586 1.406t-1.383.609H3.985q-.797 0-1.383-.609t-.586-1.406v-12q0-.797.586-1.406t1.383-.609h16.031z"/></symbol><symbol viewBox="0 0 24 28" id="github" xmlns="http://www.w3.org/2000/svg"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-.609.109-.828-.266-.828-.578 0-.391.016-1.687.016-3.297 0-1.125-.375-1.844-.812-2.219 2.672-.297 5.484-1.313 5.484-5.922 0-1.313-.469-2.375-1.234-3.219.125-.313.531-1.531-.125-3.187-1-.313-3.297 1.234-3.297 1.234a11.28 11.28 0 00-6 0S6.704 6.656 5.704 6.969c-.656 1.656-.25 2.875-.125 3.187-.766.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-.344.313-.656.844-.766 1.609-.688.313-2.438.844-3.484-1-.656-1.141-1.844-1.234-1.844-1.234-1.172-.016-.078.734-.078.734.781.359 1.328 1.75 1.328 1.75.703 2.141 4.047 1.422 4.047 1.422 0 1 .016 1.937.016 2.234 0 .313-.219.688-.828.578C3.439 23.796.002 19.296.002 13.999c0-6.625 5.375-12 12-12zM4.547 19.234c.031-.063-.016-.141-.109-.187-.094-.031-.172-.016-.203.031-.031.063.016.141.109.187.078.047.172.031.203-.031zm.484.532c.063-.047.047-.156-.031-.25-.078-.078-.187-.109-.25-.047-.063.047-.047.156.031.25.078.078.187.109.25.047zm.469.703c.078-.063.078-.187 0-.297-.063-.109-.187-.156-.266-.094-.078.047-.078.172 0 .281s.203.156.266.109zm.656.656c.063-.063.031-.203-.063-.297-.109-.109-.25-.125-.313-.047-.078.063-.047.203.063.297.109.109.25.125.313.047zm.891.391c.031-.094-.063-.203-.203-.25-.125-.031-.266.016-.297.109s.063.203.203.234c.125.047.266 0 .297-.094zm.984.078c0-.109-.125-.187-.266-.172-.141 0-.25.078-.25.172 0 .109.109.187.266.172.141 0 .25-.078.25-.172zm.906-.156c-.016-.094-.141-.156-.281-.141-.141.031-.234.125-.219.234.016.094.141.156.281.125s.234-.125.219-.219z"/></symbol><symbol viewBox="0 0 28 28" id="heart" xmlns="http://www.w3.org/2000/svg"><path d="M14 26c-.25 0-.5-.094-.688-.281l-9.75-9.406c-.125-.109-3.563-3.25-3.563-7C-.001 4.735 2.796 2 7.468 2c2.734 0 5.297 2.156 6.531 3.375C15.233 4.156 17.796 2 20.53 2c4.672 0 7.469 2.734 7.469 7.313 0 3.75-3.437 6.891-3.578 7.031l-9.734 9.375a.972.972 0 01-.688.281z"/></symbol><symbol viewBox="0 0 24 24" id="link" xmlns="http://www.w3.org/2000/svg"><path d="M17.016 6.984q2.063 0 3.516 1.477T21.985 12t-1.453 3.539-3.516 1.477h-4.031v-1.922h4.031q1.266 0 2.18-.914T20.11 12t-.914-2.18-2.18-.914h-4.031V6.984h4.031zm-9 6v-1.969h7.969v1.969H8.016zM3.891 12q0 1.266.914 2.18t2.18.914h4.031v1.922H6.985q-2.063 0-3.516-1.477T2.016 12t1.453-3.539 3.516-1.477h4.031v1.922H6.985q-1.266 0-2.18.914T3.891 12z"/></symbol><symbol viewBox="0 0 24 24" id="menu" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2.016H3V6zm0 6.984v-1.969h18v1.969H3zM3 18v-2.016h18V18H3z"/></symbol><symbol viewBox="0 0 24 24" id="notification" xmlns="http://www.w3.org/2000/svg"><path d="M18 15.984L20.016 18v.984H3.985V18l2.016-2.016v-4.969q0-2.344 1.195-4.078t3.305-2.25v-.703q0-.609.422-1.055t1.078-.445 1.078.445.422 1.055v.703q2.109.516 3.305 2.25t1.195 4.078v4.969zm-6 6q-.844 0-1.43-.563t-.586-1.406h4.031q0 .797-.609 1.383T12 21.984z"/></symbol><symbol viewBox="0 0 24 24" id="path" xmlns="http://www.w3.org/2000/svg"><path d="M21.984 11.016H15v-3h-2.016v7.969H15v-3h6.984v8.016H15v-3h-3.984V8.017H9v3H2.016V3.001H9v3h6v-3h6.984v8.016z"/></symbol><symbol viewBox="0 0 24 24" id="person" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.016q2.531 0 5.273 1.102t2.742 2.883v2.016H3.984v-2.016q0-1.781 2.742-2.883t5.273-1.102zM12 12q-1.641 0-2.813-1.172T8.015 8.015t1.172-2.836T12 3.984t2.813 1.195 1.172 2.836-1.172 2.813T12 12z"/></symbol><symbol viewBox="0 0 24 24" id="search" xmlns="http://www.w3.org/2000/svg"><path d="M9.516 14.016q1.875 0 3.188-1.313t1.313-3.188-1.313-3.188-3.188-1.313-3.188 1.313-1.313 3.188 1.313 3.188 3.188 1.313zm6 0l4.969 4.969-1.5 1.5-4.969-4.969v-.797l-.281-.281q-1.781 1.547-4.219 1.547-2.719 0-4.617-1.875T3.001 9.516t1.898-4.617 4.617-1.898 4.594 1.898 1.875 4.617q0 .984-.469 2.227t-1.078 1.992l.281.281h.797z"/></symbol><symbol viewBox="0 0 20 28" id="shield" xmlns="http://www.w3.org/2000/svg"><path d="M17 15V5h-7v17.766c.797-.422 2.078-1.156 3.328-2.141C15 19.312 17 17.266 17 15zm3-12v12c0 6.578-9.203 10.734-9.594 10.906-.125.063-.266.094-.406.094s-.281-.031-.406-.094C9.203 25.734 0 21.578 0 15V3c0-.547.453-1 1-1h18c.547 0 1 .453 1 1z"/></symbol><symbol viewBox="0 0 32 32" id="tags" xmlns="http://www.w3.org/2000/svg"><path d="M5 5c-1.104 0-2 .887-2 2v8l13.381 13.381c.716.716 1.838.78 2.62.191L5 14.5V5.007 5zm11-1l13.381 13.381c.783.783.787 2.051.008 2.831l-7.177 7.177a2.003 2.003 0 01-2.831-.008L6 14V6c0-1.112.895-2 2-2h8zm-4.5 7a1.5 1.5 0 10-.001-3.001A1.5 1.5 0 0011.5 11z"/></symbol><symbol viewBox="0 0 35 32" id="telescope" xmlns="http://www.w3.org/2000/svg"><path d="M27.464 2.314a.501.501 0 00-.698-.257L14.86 8.339a.499.499 0 00-.233.621l.245.641-6.873 3.769a.5.5 0 00-.222.63l.228.549-7.299 3.488a.5.5 0 00-.246.643l1.498 3.61a.5.5 0 00.629.28l7.625-2.701.228.549a.5.5 0 00.601.289l7.276-2.097.218.569a.497.497 0 00.612.299l13-4a.498.498 0 00.317-.663l-5-12.501zM2.7 21.469l-1.134-2.734 6.823-3.261 1.439 3.47L2.7 21.469zm8.491-1.846l-.238-.574-1.843-4.445-.238-.573 6.336-3.475 2.374 6.134.375.981-6.766 1.952zm8.109-1.238l-.203-.531c-.003-.011-.001-.024-.006-.035l-.618-1.597-2.754-7.206 11.023-5.815 4.592 11.48L19.3 18.385zM28.964.314a.5.5 0 00-.929.371l6 15a.502.502 0 00.651.279.501.501 0 00.279-.65l-6.001-15zM18 21h-3c-1.14 0-2 .86-2 2v1.315l-5.879 6.859a.5.5 0 10.758.651L13.73 25H16v6.5a.5.5 0 001 0V25h2.27l5.85 6.825a.497.497 0 00.705.054.5.5 0 00.054-.705L20 24.315v-1.24C20 21.912 19.122 21 18 21zm1 3h-5v-1c0-.589.411-1 1-1h3c.57 0 1 .462 1 1.075V24z"/></symbol></svg>

    <div class="wrapper">
        <input type="checkbox" class="hidden" id="menu-control" />
        <header class="gdoc-header">
    <div class="container flex align-center justify-between">
        
        <label for="menu-control" class="gdoc-nav__control">
            <svg class="icon menu"><use xlink:href="#menu"></use></svg>
            <svg class="icon arrow-back"><use xlink:href="#arrow_back"></use></svg>
        </label>
        
        <a class="gdoc-header__link" href="https://owncloud.github.io/">
            <span class="gdoc-brand flex align-center">
                <img class="gdoc-brand__img" src="/logo.png" alt="ownCloud" width=38 height=38>
                ownCloud
            </span>
        </a>
    </div>
</header>


        <main class="container flex flex-even">
            <aside class="gdoc-nav">
                <nav>
    
    <div class="gdoc-search">
        <svg class="icon search"><use xlink:href="#search"></use></svg>
        <input type="text" id="gdoc-search-input" class="gdoc-search__input" placeholder="Search..."
            aria-label="Search" maxlength="64" />
        <div class="gdoc-search__spinner spinner hidden"></div>
        <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
    </div>



    <section class="gdoc-nav--main">
        <h2>Navigation</h2>
        
            

    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/" class="gdoc-nav__entry ">
                        Infinite Scale
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/development/" class="gdoc-nav__entry ">
                        Getting Started with Development
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/basic-remote-setup/" class="gdoc-nav__entry ">
                        Basic Remote Setup
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/configuration/" class="gdoc-nav__entry ">
                        Configuration
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/bridge/" class="gdoc-nav__entry ">
                        Bridge
                    </a>
                </span>
            

            
            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/eos/" class="gdoc-nav__entry ">
                        EOS
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/testing/" class="gdoc-nav__entry ">
                        Testing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/extensions/" class="gdoc-nav__entry ">
                        Extension
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/login-flow/" class="gdoc-nav__entry ">
                        Login Flow
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/request-flow/" class="gdoc-nav__entry ">
                        Request Flow
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/public-upload-flow/" class="gdoc-nav__entry ">
                        Public upload Flow
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/debugging/" class="gdoc-nav__entry ">
                        Debugging
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/tracing/" class="gdoc-nav__entry ">
                        Tracing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/ocis/license/" class="gdoc-nav__entry ">
                        License
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">Clients</span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/" class="gdoc-nav__entry ">
                        Phoenix
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/building/" class="gdoc-nav__entry ">
                        Building from source
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/releasing/" class="gdoc-nav__entry ">
                        Releasing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/backend-oc10/" class="gdoc-nav__entry ">
                        Setup with ownCloud 10
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/backend-ocis/" class="gdoc-nav__entry ">
                        Setup with OCIS
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/testing/" class="gdoc-nav__entry ">
                        Running acceptance tests
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/clients/web/building-docs/" class="gdoc-nav__entry ">
                        Building the documentation
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">Extensions</span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_hello/" class="gdoc-nav__entry ">
                        Hello
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_hello/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_hello/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_hello/configuration-with-ocis/" class="gdoc-nav__entry ">
                        Running
                    </a>
                </span>
            

            
            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_hello/settings/" class="gdoc-nav__entry ">
                        Settings
                    </a>
                </span>
            

            
            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_hello/testing/" class="gdoc-nav__entry ">
                        Testing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_hello/license/" class="gdoc-nav__entry ">
                        License
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_konnectd/" class="gdoc-nav__entry ">
                        Konnectd
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_konnectd/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_konnectd/configuration/" class="gdoc-nav__entry ">
                        Configuration
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_konnectd/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_proxy/" class="gdoc-nav__entry ">
                        Proxy
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_proxy/about/" class="gdoc-nav__entry ">
                        About
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_proxy/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_proxy/configuration/" class="gdoc-nav__entry ">
                        Configuration
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_proxy/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_accounts/" class="gdoc-nav__entry ">
                        Accounts
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_accounts/configuration/" class="gdoc-nav__entry ">
                        Configuration
                    </a>
                </span>
            

            
            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_accounts/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_accounts/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_glauth/" class="gdoc-nav__entry ">
                        GLAuth
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_glauth/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_glauth/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_glauth/license/" class="gdoc-nav__entry ">
                        License
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_phoenix/" class="gdoc-nav__entry ">
                        Phoenix
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_phoenix/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_phoenix/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_phoenix/releasing/" class="gdoc-nav__entry ">
                        Releasing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_phoenix/license/" class="gdoc-nav__entry ">
                        License
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/" class="gdoc-nav__entry ">
                        Reva
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/configuration/" class="gdoc-nav__entry ">
                        Configuration
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/users/" class="gdoc-nav__entry ">
                        Users
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/storages/" class="gdoc-nav__entry is-active">
                        Storages
                    </a>
                </span>
            

            
            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/testing/" class="gdoc-nav__entry ">
                        Testing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/license/" class="gdoc-nav__entry ">
                        License
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/updating/" class="gdoc-nav__entry ">
                        Updating reva
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_reva/releasing/" class="gdoc-nav__entry ">
                        Releasing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_settings/" class="gdoc-nav__entry ">
                        Settings
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_settings/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_settings/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_settings/bundles/" class="gdoc-nav__entry ">
                        Settings Bundles
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_settings/values/" class="gdoc-nav__entry ">
                        Settings Values
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_settings/glossary/" class="gdoc-nav__entry ">
                        Glossary
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_settings/license/" class="gdoc-nav__entry ">
                        License
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_thumbnails/" class="gdoc-nav__entry ">
                        Thumbnails
                    </a>
                </span>
            

            
            
                
    

    <ul class="gdoc-nav__list">
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_thumbnails/getting-started/" class="gdoc-nav__entry ">
                        Getting Started
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_thumbnails/building/" class="gdoc-nav__entry ">
                        Building
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_thumbnails/releasing/" class="gdoc-nav__entry ">
                        Releasing
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_thumbnails/grpc/" class="gdoc-nav__entry ">
                        GRPC API
                    </a>
                </span>
            

            
            
            </li>
            
            
        
            
            
            <li>
            
                <span class="flex">
                    <a href="/extensions/ocis_thumbnails/license/" class="gdoc-nav__entry ">
                        License
                    </a>
                </span>
            

            
            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
        
    </ul>

            
            </li>
            
            
        
    </ul>





        
    </section>

    <section class="gdoc-nav--more">
        
    </section>
</nav>

            </aside>

            <div class="gdoc-page">
                
    


    






<div class="gdoc-page__header flex flex-wrap justify-between" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <span>
        
            <span class="breadcrumb">
                <svg class="icon path"><use xlink:href="#path"></use></svg>
                
                
    
    
        
        
        
    
    
        
        
        
    
    
        
        
        
    
    
        <a href='/'>Documentation</a> / <a href='/extensions/'>Extensions</a> / <a href='/extensions/ocis_reva/'>Reva</a> / Storages
    

    

    

    

            </span>
        
    </span>
    <span>
        
            <svg class="icon code"><use xlink:href="#code"></use></svg>
            <a href="https://github.com/owncloud/ocis-reva/edit/master/docs/storages.md">
                Edit this page
            </a>
        
    </span>
</div>


    <article class="gdoc-markdown">
        <h1>Storages</h1>
        




    


<div class="gdoc-page__anchorwrap"><h2 id="storage-commands"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#storage-commands" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#storage-commands"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Storage commands</h2></div>
<p><code>ocis-reva</code> has multiple storage provider commands to preconfigure different default configurations for the reva <em>storage provider</em> service. While you could rerun <code>ocis-reva storage-oc</code> multiple times with different flags to get multiple instances we are giving the different commands the necessary default configuration to allow the <code>ocis</code> binary to simply start them and not deal with configuration.</p>
<div class="gdoc-page__anchorwrap"><h2 id="storage-providers"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#storage-providers" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#storage-providers"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Storage providers</h2></div>
<p>To manage the file tree ocis uses reva <em>storage providers</em> that are accessing the underlying storage using a <em>storage driver</em>. The driver can be used to change the implementation of a storage aspect to better reflect the actual underlying storage capabilities. As an example a move operation on a POSIX filesystem (<a href="https://danluu.com/deconstruct-files/">theoretically</a>) is an atomic operation. When trying to implement a file tree on top of S3 there is no native move operation that can be used. A naive implementation might fall back on a COPY and DELETE. Some S3 implementations provide a COPY operation that uses an existing key as the source, so the file at least does not need to be reuploaded. In the worst case scenario, which is renaming a folder with hundreds of thousands of objects, a reupload for every file has to be made. Instead of hiding this complexity a better choice might be to disable renaming of files or at least folders on S3. There are however implementations of filesystems on top of S3 that store the tree metadata in dedicated objects or use a completely different persistence mechanism like a distributed key value store to implement the file tree aspect of a storage.</p>
<blockquote class="gdoc-hint info">
  While the <em>storage provider</em> is responsible for managing the tree, file up and download is delegated to a dedicated <em>data provider</em>. See below.
</blockquote>

<div class="gdoc-page__anchorwrap"><h2 id="storage-aspects"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#storage-aspects" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#storage-aspects"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Storage aspects</h2></div>
<p>A lot of different storage technologies exist, ranging from general purpose file systems with POSIX semantics to software defined storage with multiple APIs. Choosing any of them is making a tradeoff decision. Or, if a storage technology is already in place it automatically predetermines the capabilities that can be made available. <em>Not all storage systems are created equal.</em></p>
<p>Unfortunately, no POSIX filesystem natively supports all storage aspects that ownCloud 10 requires:</p>
<div class="gdoc-page__anchorwrap"><h3 id="a-hierarchical-file-tree"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#a-hierarchical-file-tree" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#a-hierarchical-file-tree"><svg class="icon link"><use xlink:href="#link"></use></svg></a>A hierarchical file tree</h3></div>
<p>An important aspect of a filesystem is organizing files and directories in a file hierarchy, or tree. It allows you to create, move and delete nodes. Beside the name a node also has well known metadata like size and mtime that are persisted in the tree as well.</p>
<blockquote class="gdoc-hint info">
  <strong>Folders are not directories</strong>
There is a difference between <em>folder</em> and <em>directory</em>: a <em>directory</em> is a file system concept. A <em>folder</em> is a metaphor for the concept of a physical file folder. There are also <em>virtual folders</em> or <em>smart folders</em> like the recent files folder which are no file system <em>directories</em>. So, every <em>directory</em> and every <em>virtual folder</em> is a <em>folder</em>, but not every <em>folder</em> is a <em>directory</em>. See <a href="https://en.wikipedia.org/wiki/Directory_(computing)#Folder_metaphor">the folder metaphor in wikipedia</a>. Also see the activity history below.
</blockquote>

<div class="gdoc-page__anchorwrap"><h4 id="id-based-lookup"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#id-based-lookup" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#id-based-lookup"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Id based lookup</h4></div>
<p>While traditionally nodes in the tree are reached by traversing the path the tree persistence should be prepared to look up a node by an id. Think of an inode in a POSIX filesystem. If this operation needs to be cached for performance reasons keep in mind that cache invalidation is hard and crawling all files to update the inode to path mapping takes O(n), not O(1).</p>
<div class="gdoc-page__anchorwrap"><h4 id="etag-propagation"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#etag-propagation" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#etag-propagation"><svg class="icon link"><use xlink:href="#link"></use></svg></a>ETag propagation</h4></div>
<p>For the state based sync a client can discover changes by recursively descending the tree and comparing the ETag for every node. If the storage technology supports propagating ETag changes up the tree, only the root node of a tree needs to be checked to determine if a discovery needs to be started and which nodes need to be traversed. This allows using the storage technology itself to persist all metadata that is necessary for sync, without additional services or caches.</p>
<div class="gdoc-page__anchorwrap"><h4 id="subtree-size-accounting"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#subtree-size-accounting" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#subtree-size-accounting"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Subtree size accounting</h4></div>
<p>The tree can keep track of how many bytes are stored in a folder. Similar to ETag propagation a change in file size is propagated up the hierarchy.</p>
<blockquote class="gdoc-hint info">
  <strong>ETag and Size propagation</strong>
When propagating the ETag (mtime) and size changes up the tree the question is where to stop. If all changes need to be propagated to the root of a storage then the root or busy folders will become a hotspot. There are two things to keep in mind: 1. propagation only happens up to the root of a single space (a user private drive or a single group drive), 2. no cross storage propagation. The latter was used in oc10 to let clients detect when a file in a received shared folder changed. This functionality is moving to the storage registry which caches the ETag for every root so clients can discover if and which storage changed.
</blockquote>

<div class="gdoc-page__anchorwrap"><h4 id="rename"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#rename" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#rename"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Rename</h4></div>
<p>Depending on the underlying storage technology some operations may either be slow, up to a point where it makes more sense to disable them entirely. One example is a folder rename: on S3 a <em>simple</em> folder rename translates to a copy and delete operation for every child of the renamed folder. There is an exception though: this restriction only applies if the S3 storage is treated like a filesystem, where the keys are the path and the value is the file content. There are smarter ways to implement file systems on top of S3, but again: there is always a tradeoff.</p>
<blockquote class="gdoc-hint info">
  <strong>S3 has no rename</strong>
Technically, <a href="https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/examples-s3-objects.html#copy-object">S3 has no rename operation at all</a>. By design, the location of the value is determined by the key, so it always has to do a copy and delete. Another example is the <a href="https://redis.io/commands/rename">redis RENAME operation</a>: while being specified as O(1) it <em>executes an implicit DEL operation, so if the deleted key contains a very big value it may cause high latency&hellip;</em>
</blockquote>

<div class="gdoc-page__anchorwrap"><h4 id="arbitrary-metadata-persistence"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#arbitrary-metadata-persistence" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#arbitrary-metadata-persistence"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Arbitrary metadata persistence</h4></div>
<p>In addition to well known metadata like name size and mtime, users might be able to add arbitrary metadata like tags, comments or <a href="https://en.wikipedia.org/wiki/Dublin_Core">dublin core</a>. In POSIX filesystems this maps to extended attributes.</p>
<div class="gdoc-page__anchorwrap"><h3 id="grant-persistence"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#grant-persistence" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#grant-persistence"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Grant persistence</h3></div>
<p>The CS3 API uses grants to describe access permissions. Storage systems have a wide range of permissions granularity and not all grants may be supported by every storage driver. POSIX ACLs for example have no expiry. If the storage system does not support certain grant properties, e.g. expiry, then the storage driver may choose to implement them in a different way. Expiries could be persisted in a different way and checked periodically to remove the grants. Again: every decision is a tradeoff.</p>
<div class="gdoc-page__anchorwrap"><h3 id="trash-persistence"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#trash-persistence" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#trash-persistence"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Trash persistence</h3></div>
<p>After deleting a node the storage allows listing the deleted nodes and has an undo mechanism for them.</p>
<div class="gdoc-page__anchorwrap"><h3 id="versions-persistence"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#versions-persistence" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#versions-persistence"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Versions persistence</h3></div>
<p>A user can restore a previous version of a file.</p>
<blockquote class="gdoc-hint info">
  <strong>Snapshots are not versions</strong>
Modern POSIX filesystems support snapshotting of volumes. This is different from keeping track of versions to a file or folder, but might be another implementation strategy for a storage driver to allow users to restore content.
</blockquote>

<div class="gdoc-page__anchorwrap"><h3 id="activity-history"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#activity-history" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#activity-history"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Activity History</h3></div>
<p>The storage keeps an activity history, tracking the different actions that have been performed. This does not only include file changes but also metadata changes like renames and permission changes.</p>
<div class="gdoc-page__anchorwrap"><h2 id="storage-drivers"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#storage-drivers" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#storage-drivers"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Storage drivers</h2></div>
<p>Reva currently has four storage driver implementations that can be used for <em>storage providers</em> an well as <em>data providers</em>.</p>
<div class="gdoc-page__anchorwrap"><h3 id="local-storage-driver"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#local-storage-driver" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#local-storage-driver"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Local Storage Driver</h3></div>
<p>The <em>minimal</em> storage driver for a POSIX based filesystem. It literally supports none of the storage aspect other than basic file tree management. Sharing can - to a degree - be implemented using POSIX ACLs.</p>
<ul>
<li>tree provided by a POSIX filesystem
<ul>
<li>inefficient path by id lookup, currently uses the file path as id, so ids are not stable
<ul>
<li>can store a uuid in extended attributes and use a cache to look them up, similar to the ownCloud driver</li>
</ul>
</li>
<li>no native ETag propagation, five options are available:
<ul>
<li>built in propagation (changes bypassing ocis are not picked up until a rescan)</li>
<li>built in inotify (requires 48 bytes of RAM per file, needs to keep track of every file and folder)</li>
<li>external inotify (same RAM requirement, but could be triggered by external tools, e.g. a workflow engine)</li>
<li>kernel audit log (use the linux kernel audit to capture file events on the storage and offload them to a queue)</li>
<li>fuse filesystem overlay</li>
</ul>
</li>
<li>no subtree accounting, same options as for ETag propagation</li>
<li>efficient rename</li>
<li>arbitrary metadata using extended attributes</li>
</ul>
</li>
<li>grant persistence
<ul>
<li>using POSIX ACLs
<ul>
<li>requires an LDAP server to make guest accounts available in the OS
<ul>
<li>OCIS has glauth which contains all users</li>
<li>an existing LDAP could be used if guests ar provisioned in another way</li>
</ul>
</li>
</ul>
</li>
<li>using extended attributes to implement expiry or sharing that does not require OS level integration</li>
<li>fuse filesystem overlay</li>
</ul>
</li>
<li>no native trash
<ul>
<li>could use the <a href="https://specifications.freedesktop.org/trash-spec/trashspec-latest.html">The FreeDesktop.org Trash specification</a></li>
<li>fuse filesystem overlay</li>
</ul>
</li>
<li>no native versions, multiple options possible
<ul>
<li>git for folders</li>
<li>rcs for single files</li>
<li>rsnapshot for hourly / daily / weekly / monthly backups &hellip; but this is not versioning as known from oc10</li>
<li>design new freedesktop spec, basically what is done in oc10 without the limitations or borrow ideas from the freedesktop trash spec</li>
<li>fuse filesystem overlay</li>
</ul>
</li>
</ul>
<p>To provide the other storage aspects we plan to implement a FUSE overlay filesystem which will add the different aspects on top of local filesystems like ext4, btrfs or xfs. It should work on NFSv45 as well, although NFSv4 supports RichACLs and we will explore how to leverage them to implement sharing at a future date. The idea is to use the storages native capabilities to deliver the best user experience. But again: that means making the right tradeoffs.</p>
<div class="gdoc-page__anchorwrap"><h3 id="owncloud-storage-driver"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#owncloud-storage-driver" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#owncloud-storage-driver"><svg class="icon link"><use xlink:href="#link"></use></svg></a>OwnCloud Storage Driver</h3></div>
<p>This is the current default storage driver. While it implements the file tree (using redis, including id based lookup), ETag propagation, trash, versions and sharing (including expiry) using the data directory layout of ownCloud 10 it has <a href="https://github.com/owncloud/core/issues/28095">known limitations</a> that cannot be fixed without changing the actual layout on disk.</p>
<ul>
<li>tree provided by a POSIX filesystem
<ul>
<li>file layout is mapped to the old ownCloud 10 layout
<ul>
<li>the root of tree for a user on disk is prefixed with <code>/path/to/data/&lt;username&gt;/files/</code></li>
</ul>
</li>
<li>efficient path by id lookup
<ul>
<li>all files and folders get assigned a uuid in the extended attributes</li>
<li>when starting the storage provider it will walk all files to populate a redis kv store for uuid to path lookup</li>
<li>slow to boot trees with lots of nodes</li>
</ul>
</li>
<li>build in ETag propagation
<ul>
<li>ETags are calculated based on mtime</li>
<li>mtime is propagated by the storage driver</li>
<li>changes bypassing ocis are not picked up until a restart of the storage provider</li>
</ul>
</li>
<li>no subtree accounting, same options as for local storage</li>
<li>efficient rename
<ul>
<li>TODO <a href="https://github.com/cs3org/reva/issues/985">update the kv store for path lookup</a>, this is an O(n) operation</li>
</ul>
</li>
<li>arbitrary metadata using extended attributes</li>
</ul>
</li>
<li>grant persistence
<ul>
<li>using custom ACLs that are stored as extended attributes
<ul>
<li>a grant corresponds to one extended attribute of 40-100 bytes, effectively limiting the number of shares to ~100-40</li>
<li>extended attributes have varying limitations, based on the underlying filesystem
<ul>
<li>the linux kernel imposes a limit of 255bytes per name and 64KiB per value</li>
<li>ext2/3/4: total bytes for all attributes of a file is limited to 4KiB (a filesystem block)</li>
<li>xfs: limit of 64KiB per value</li>
<li>btrfs: total bytes used for the name, value, and implementation overhead bytes 16KiB (the default filesystem nodesize value)</li>
</ul>
</li>
</ul>
</li>
<li>does not require OS level integration</li>
</ul>
</li>
<li>built in trash
<ul>
<li>trashed files are moved to <code>/path/to/data/&lt;username&gt;/files_trashbin/</code></li>
<li>trashed files are appended a timestamp <code>.d&lt;unixtime&gt;</code>, which <a href="https://github.com/owncloud/core/issues/28095">breaks trashing of files that reach the filesystems specific name limit</a></li>
</ul>
</li>
<li>built in versions
<ul>
<li>file versions are stored in <code>/path/to/data/&lt;username&gt;/files_versions/</code></li>
<li>file versions are appended a timestamp <code>.d&lt;unixtime&gt;</code>, which <a href="https://github.com/owncloud/core/issues/28095">breaks versioning of files that reach the filesystems specific name limit</a></li>
</ul>
</li>
</ul>
<div class="gdoc-page__anchorwrap"><h3 id="eos-storage-driver"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#eos-storage-driver" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#eos-storage-driver"><svg class="icon link"><use xlink:href="#link"></use></svg></a>EOS Storage Driver</h3></div>
<p>The CERN eos storage has evolved with ownCloud and natively supports id based lookup, ETag propagation, subtree size accounting, sharing, trash and versions. To use it you need to change the default configuration of the <code>ocis-reva storage-home</code> command (or have a look at the Makefile  eos-start` target):</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">export REVA_STORAGE_HOME_DRIVER=eos
export REVA_STORAGE_EOS_NAMESPACE=/eos
export REVA_STORAGE_EOS_MASTER_URL=&#34;root://eos-mgm1.eoscluster.cern.ch:1094&#34;
export REVA_STORAGE_EOS_ENABLE_HOME=true
export REVA_STORAGE_EOS_LAYOUT=&#34;dockertest/{{.Username}}&#34;
</code></pre></div><p>Running it locally also requires the <code>eos</code> and <code>xrootd</code> binaries. Running it using <code>make eos-start</code> will use CentOS based containers that already have the necessary packages installed.</p>
<blockquote class="gdoc-hint info">
  Pull requests to add explicit <code>reva storage-(s3|custom|...)</code> commands with working defaults are welcome.
</blockquote>

<div class="gdoc-page__anchorwrap"><h3 id="s3-storage-driver"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#s3-storage-driver" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#s3-storage-driver"><svg class="icon link"><use xlink:href="#link"></use></svg></a>S3 Storage Driver</h3></div>
<p>A naive driver that treats the keys in an S3 capable storage as <code>/</code> delimited path names. While it does not support MOVE or ETag propagation it can be used to read and write files. Better integration with native capabilities like versioning is possible but depends on the Use Case. Several storage solutions that provide an S3 interface also support some form of notifications that can be used to implement ETag propagation.</p>
<div class="gdoc-page__anchorwrap"><h2 id="data-providers"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#data-providers" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#data-providers"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Data Providers</h2></div>
<p>Clients using the CS3 API use an <a href="https://cs3org.github.io/cs3apis/#cs3.storage.provider.v1beta1.InitiateFileDownloadRequest">InitiateFileDownload</a> and ]InitiateUpload](<a href="https://cs3org.github.io/cs3apis/#cs3.storage.provider.v1beta1.InitiateFileUploadRequest">https://cs3org.github.io/cs3apis/#cs3.storage.provider.v1beta1.InitiateFileUploadRequest</a>) request at the <a href="https://cs3org.github.io/cs3apis/#cs3.gateway.v1beta1.GatewayAPI">reva gateway</a> to obtain a URL endpoint that can be used to either GET the file content or upload content using the resumable <a href="https://tus.io">tus.io</a> protocol.</p>
<p>The <em>data provider</em> uses the same <em>storage driver</em> as the <em>storage provider</em> but can be scaled independently.</p>
<p>The dataprovider allows uploading the file to a quarantine area where further data analysis may happen before making the file accessible again. One use case for this is anti virus scanning for files coming from untrusted sources.</p>
<div class="gdoc-page__anchorwrap"><h2 id="future-work"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#future-work" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#future-work"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Future work</h2></div>
<div class="gdoc-page__anchorwrap"><h3 id="fuse-overlay-filesystem"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#fuse-overlay-filesystem" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#fuse-overlay-filesystem"><svg class="icon link"><use xlink:href="#link"></use></svg></a>FUSE overlay filesystem</h3></div>
<p>We are planning to further separate the concerns and use a local storage provider with a FUSE filesystem overlaying the actual POSIX storage that can be used to capture deletes and writes that might happen outside of ocis/reva.</p>
<p>It would allow us to extend the local storage driver with missing storage aspects while keeping a tree like filesystem that end users are used to see when sshing into the machine.</p>
<div class="gdoc-page__anchorwrap"><h3 id="upload-to-quarantine-area"><a data-clipboard-text="https://owncloud.github.io/extensions/ocis_reva/storages/#upload-to-quarantine-area" class="gdoc-page__anchor gdoc-page__anchor--left clip" href="#upload-to-quarantine-area"><svg class="icon link"><use xlink:href="#link"></use></svg></a>Upload to Quarantine area</h3></div>
<p>Antivirus scanning of random files uploaded from untrusted sources and executing metadata extraction or thumbnail generation should happen in a sandboxed system to prevent malicious users from gaining any information about the system. By spawning a new container with access to only the uploaded data we can further limit the attack surface.</p>


    </article>

                








    
    

    





<div class="gdoc-page__footer flex flex-wrap justify-between">
    
    
</div>

            </div>
        </main>

        <footer class="gdoc-footer">
    <div class="container flex flex-wrap">
        <span class="gdoc-footer__item">
            Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and
            <svg class="icon heart"><use xlink:href="#heart"></use></svg>
        </span>
        
        <span class="gdoc-footer__item">
            <a href="https://owncloud.org/imprint/" class="gdoc-footer__link">Legal Notice</a>
        </span>
        
        
        <span class="gdoc-footer__item">
            <a href="https://owncloud.org/privacy-policy/" class="gdoc-footer__link">Privacy Policy</a>
        </span>
        
    </div>
</footer>

    </div>
</body>






<script defer src="/js/en.search.min.js"></script>



<script src="/js/clipboard.min.js"></script>
<script>
    var clipboard = new ClipboardJS('.clip');
</script>


</html>
